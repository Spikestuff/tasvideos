@page "{id}"
@model TASVideos.Pages.Exhibitions.EditModel
@{
	ViewData.SetTitle($"Edit Exhibition #{Model.Id}");
}
<div class="text-danger">
	@Html.ValidationSummary()
</div>

<form method="post">
	<form-group>
		<label asp-for="Exhibition.Title" class="form-control-label"></label>
		<input asp-for="Exhibition.Title" class="form-control" />
		<span asp-validation-for="Exhibition.Title" class="text-danger"></span>
	</form-group>
	<form-group>
		<label asp-for="Exhibition.ExhibitionTimestamp" class="form-control-label"></label>
		<input asp-for="Exhibition.ExhibitionTimestamp" class="form-control" />
		<span asp-validation-for="Exhibition.ExhibitionTimestamp" class="text-danger"></span>
	</form-group>
	<button class="btn btn-primary btn-sm float-end mb-1"><i class="fa fa-pencil"></i> Edit Files</button>
	<label asp-for="Exhibition.Files" class="form-control-label"></label>
	<table class="table table-bordered table-sm">
		<tr>
			<th>Type</th>
			<th>File Name</th>
			<th>Description</th>
		</tr>
		@foreach (var file in Model.Exhibition.Files)
		{
			<tr>
				<td>@file.Type</td>
				<td>@file.Path</td>
				<td>@file.Description</td>
			</tr>
		}
	</table>
	<a permission="EditPublicationFiles" asp-page="EditUrls" asp-route-id="@Model.Id" class="btn btn-primary btn-sm float-end mb-1"><i class="fa fa-pencil"></i> Edit URLs</a>
	<label asp-for="Exhibition.Urls" class="form-control-label"></label>
	<table class="table table-bordered table-sm">
		<tr>
			<th>Type</th>
			<th>Name</th>
			<th>URL</th>
		</tr>
		@foreach (var url in Model.Exhibition.Urls)
		{
			<tr>
				<td>@url.Type</td>
				<td>@url.DisplayName</td>
				<td><a href="@url.Url">@url.Url</a></td>
			</tr>
		}
	</table>
	<form-group>
		<label asp-for="Exhibition.Games"></label>
		<select asp-for="Exhibition.Games" asp-items="Model.AvailableGames"></select>
	</form-group>
	<form-group>
		<label asp-for="Exhibition.Contributors"></label>
		<select asp-for="Exhibition.Contributors" asp-items="Model.AvailableUsers"></select>
	</form-group>
	<div class="text-center">
		<button id="submit-btn" type="submit" class="btn btn-primary"><i class="fa fa-save"></i> Save</button>
		<a class="btn btn-secondary" asp-page="View" asp-route-id="@Model.Id"><i class="fa fa-times"></i> Cancel</a>
	</div>
</form>

@section Scripts {
	<partial name="_ValidationScriptsPartial" />
	<script src="/js/select-improver.js"></script>
	<script>
		engageSelectImprover('@Html.IdFor(m => m.Exhibition.Games)');
		engageSelectImprover('@Html.IdFor(m => m.Exhibition.Contributors)');
	</script>
}